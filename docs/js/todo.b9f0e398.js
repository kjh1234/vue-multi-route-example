(function(t){function e(e){for(var n,r,s=e[0],c=e[1],l=e[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,s=1;s<o.length;s++){var c=o[s];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=o[0]))}return t}var n={},i={todo:0},a=[];function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;a.push([2,"chunk-vendors"]),o()})({2:function(t,e,o){t.exports=o("638c")},3:function(t,e){},4:function(t,e){},"4cba":function(t,e,o){},5:function(t,e){},6:function(t,e){},"638c":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("ext-router-link",{staticClass:"to-home",attrs:{app:"index",to:"/"}},[o("i",{staticClass:"material-icons"},[t._v("home")])]),o("router-view")],1)},a=[],r=(o("ec4e"),o("2877")),s={},c=Object(r["a"])(s,i,a,!1,null,"3511fcb2",null),l=c.exports,d=o("8c4f"),u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-app"},[o("div",{staticClass:"todo-app__actions"},[o("div",{staticClass:"filters"},[o("router-link",{attrs:{app:"todo",to:"/",tag:"button"}},[t._v(" 모든 항목 ("+t._s(t.total)+") ")]),o("router-link",{attrs:{to:"active",tag:"button"}},[t._v(" 해야 할 항목 ("+t._s(t.activeCount)+") ")]),o("router-link",{attrs:{to:"completed",tag:"button"}},[t._v(" 완료된 항목 ("+t._s(t.completedCount)+") ")])],1),o("div",{staticClass:"actions clearfix"},[o("label",{staticClass:"float--left"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.allDone,expression:"allDone"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allDone)?t._i(t.allDone,null)>-1:t.allDone},on:{change:function(e){var o=t.allDone,n=e.target,i=!!n.checked;if(Array.isArray(o)){var a=null,r=t._i(o,a);n.checked?r<0&&(t.allDone=o.concat([a])):r>-1&&(t.allDone=o.slice(0,r).concat(o.slice(r+1)))}else t.allDone=i}}}),t._m(0)]),o("div",{staticClass:"float--right clearfix"},[o("button",{staticClass:"btn float--left",on:{click:t.scrollToTop}},[o("i",{staticClass:"material-icons"},[t._v("expand_less")])]),o("button",{staticClass:"btn float--left",on:{click:t.scrollToBottom}},[o("i",{staticClass:"material-icons"},[t._v("expand_more")])]),o("button",{staticClass:"btn btn--danger float--left",on:{click:t.clearCompleted}},[o("i",{staticClass:"material-icons"},[t._v("delete_sweep")])])])])]),o("div",{staticClass:"todo-app__list"},t._l(t.filteredTodos,(function(t){return o("todo-item",{key:t.id,attrs:{todo:t}})})),1),o("todo-creator",{staticClass:"todo-app__creator"})],1)},p=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{staticClass:"icon"},[o("i",{staticClass:"material-icons"},[t._v("done_all")])])}],f=(o("a4d3"),o("4de4"),o("e439"),o("dbb4"),o("b64b"),o("159b"),o("ade3")),m=o("2f62"),h=o("f351"),v=o.n(h),b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("button",{on:{click:t.createTodo}},[o("i",{staticClass:"material-icons"},[t._v("add")])]),o("input",{attrs:{placeholder:t.placeholder,type:"text"},domProps:{value:t.title},on:{input:function(e){t.title=e.target.value},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createTodo(e)}}})])},_=[],y=(o("498a"),{name:"TodoCreator",data:function(){return{title:"",placeholder:"할 일을 추가하세요!"}},methods:{createTodo:function(){var t=this.title&&this.title.trim();if(!t)return alert("유효하지 않은 제목입니다."),void(this.title=this.title.trim());this.$store.dispatch("todoApp/createTodo",this.title),this.title="",this.$nextTick((function(){window.scrollTo(0,document.body.scrollHeight)}))}}}),T=y,g=Object(r["a"])(T,b,_,!1,null,null,null),C=g.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-item",class:{done:t.done}},[t.isEditMode?o("div",{staticClass:"item__inner item--edit"},[o("input",{ref:"titleInput",attrs:{type:"text"},domProps:{value:t.editedTitle},on:{input:function(e){t.editedTitle=e.target.value},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editedTodo(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.offEditMode(e)}]}}),o("div",{staticClass:"item__actions"},[o("button",{key:"complete",staticClass:"btn btn--primary",on:{click:t.editedTodo}},[o("i",{staticClass:"material-icons"},[t._v("done")])]),o("button",{key:"cancel",staticClass:"btn",on:{click:t.offEditMode}},[o("i",{staticClass:"material-icons"},[t._v("clear")])])])]):o("div",{staticClass:"item__inner item--normal"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.done,expression:"done"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.done)?t._i(t.done,null)>-1:t.done},on:{change:function(e){var o=t.done,n=e.target,i=!!n.checked;if(Array.isArray(o)){var a=null,r=t._i(o,a);n.checked?r<0&&(t.done=o.concat([a])):r>-1&&(t.done=o.slice(0,r).concat(o.slice(r+1)))}else t.done=i}}}),t._m(0)]),o("div",{staticClass:"item__title-wrap"},[o("div",{staticClass:"item__title",on:{dblclick:t.onEditMode}},[t._v(t._s(t.todo.title))]),o("div",{staticClass:"item__date"},[t._v(" "+t._s(t.date)+" ")])]),o("div",{staticClass:"item__actions"},[o("button",{key:"update",staticClass:"btn",on:{click:t.onEditMode}},[o("i",{staticClass:"material-icons"},[t._v("edit")])]),o("button",{key:"delete",staticClass:"btn btn--danger",on:{click:t.deleteTodo}},[o("i",{staticClass:"material-icons"},[t._v("delete")])])])])])},O=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{staticClass:"icon"},[o("i",{staticClass:"material-icons"},[t._v("check")])])}],w=o("5a0c"),D=o.n(w),j={name:"TodoItem",props:{todo:Object},data:function(){return{isEditMode:!1,editedTitle:this.todo.title}},computed:{done:{get:function(){return this.todo.done},set:function(t){this.updateTodo({done:t})}},date:function(){var t=D()(this.todo.createdAt),e=t.isSame(this.todo.updatedAt);return e?t.format("YYYY년 MM월 DD일"):"".concat(t.format("YYYY년 MM월 DD일")," (edited)")}},methods:{onEditMode:function(){var t=this;this.editedTitle=this.todo.title,this.isEditMode=!0,this.$nextTick((function(){t.$refs.titleInput.focus()}))},offEditMode:function(){this.isEditMode=!1},editedTodo:function(){this.todo.title!==this.editedTitle&&this.updateTodo({title:this.editedTitle,updatedAt:new Date}),this.offEditMode()},updateTodo:function(t){this.$store.dispatch("todoApp/updateTodo",{todo:this.todo,value:t})},deleteTodo:function(){this.$store.dispatch("todoApp/deleteTodo",this.todo)}}},x=j,E=Object(r["a"])(x,k,O,!1,null,null,null),A=E.exports;function $(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function M(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?$(Object(o),!0).forEach((function(e){Object(f["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):$(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var P={name:"TodoApp",components:{TodoCreator:C,TodoItem:A},computed:M({},Object(m["c"])("todoApp",["filteredTodos","total","activeCount","completedCount"]),{allDone:{get:function(){return this.total===this.completedCount&&this.total>0},set:function(t){this.completeAll(t)}}}),watch:{$route:function(){this.updateFilter(this.$route.params.id)}},created:function(){this.initDB()},methods:M({},Object(m["d"])("todoApp",["updateFilter"]),{},Object(m["b"])("todoApp",["initDB","completeAll","clearCompleted"]),{scrollToBottom:function(){v()(0,document.body.scrollHeight)},scrollToTop:function(){v()(0,0)}})},B=P,S=(o("cfa3"),Object(r["a"])(B,u,p,!1,null,null,null)),Y=S.exports;n["a"].use(d["a"]);var I=[{name:"todo",path:"/",redirect:"/todos/all"},{name:"todos",path:"/todos",redirect:"/todos/all",component:Y,children:[{name:"todos-filter",path:":id"}]}],N=new d["a"]({routes:I}),F=(o("7db0"),o("a434"),o("7074")),H=o.n(F),J=o("fd77"),R=o.n(J),q=o("4556"),z=o.n(q),G=o("2769"),K=o.n(G),L=o("51f5"),Q=o.n(L),U=o("dce5"),V=o.n(U),W=o("0644"),X=o.n(W),Z=o("537a"),tt=o.n(Z),et=function(){return{db:null,todos:[],filter:"all"}},ot={filteredTodos:function(t){switch(t.filter){case"all":default:return t.todos;case"active":return t.todos.filter((function(t){return!t.done}));case"completed":return t.todos.filter((function(t){return t.done}))}},total:function(t){return t.todos.length},activeCount:function(t){return t.todos.filter((function(t){return!t.done})).length},completedCount:function(t,e){return e.total-e.activeCount}},nt={assignDB:function(t,e){t.db=e},createDB:function(t,e){t.db.get("todos").push(e).write()},updateDB:function(t,e){var o=e.todo,n=e.value;t.db.get("todos").find({id:o.id}).assign(n).write()},deleteDB:function(t,e){t.db.get("todos").remove({id:e.id}).write()},assignTodos:function(t,e){t.todos=e},pushTodo:function(t,e){t.todos.push(e)},assignTodo:function(t,e){var o=e.foundTodo,n=e.value;V()(o,n)},updateTodo:function(t,e){var o=e.todo,n=e.key,i=e.value;o[n]=i},deleteTodo:function(t,e){t.todos.splice(e,1)},updateFilter:function(t,e){t.filter=e}},it={initDB:function(t){var e=t.state,o=t.commit,n=new R.a("todo-app");o("assignDB",H()(n));var i=e.db.has("todos").value();i?o("assignTodos",X()(e.db.getState().todos)):e.db.defaults({todos:[]}).write()},createTodo:function(t,e){t.state;var o=t.commit,n={id:z()({length:10}),title:e,createdAt:new Date,updatedAt:new Date,done:!1};try{o("createDB",n),o("pushTodo",n)}catch(i){console.error(i)}},updateTodo:function(t,e){var o=t.state,n=t.commit,i=e.todo,a=e.value;try{n("updateDB",e);var r=K()(o.todos,{id:i.id});n("assignTodo",{foundTodo:r,value:a})}catch(s){console.error(s)}},deleteTodo:function(t,e){var o=t.state,n=t.commit;try{n("deleteDB",e);var i=Q()(o.todos,{id:e.id});n("deleteTodo",i)}catch(a){console.log(a)}},completeAll:function(t,e){var o=t.state,n=t.commit,i=o.db.get("todos").forEach((function(t){n("updateTodo",{todo:t,key:"done",value:e})})).write();n("assignTodos",X()(i))},clearCompleted:function(t){var e=t.state,o=(t.commit,t.dispatch);tt()(e.todos,(function(t){t.done&&o("deleteTodo",t)}))}},at={namespaced:!0,state:et,getters:ot,mutations:nt,actions:it};n["a"].use(m["a"]);var rt=new m["a"].Store({strict:!1,modules:{todoApp:at}}),st=o("e19c");n["a"].component("ext-router-link",st["a"]),new n["a"]({data:{appName:"todo"},el:"#app",router:N,store:rt,render:function(t){return t(l)}})},cfa3:function(t,e,o){"use strict";var n=o("4cba"),i=o.n(n);i.a},d102:function(t,e,o){},e19c:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.isRoute?o("router-link",{attrs:{to:t.to}},[t._t("default")],2):o("a",{attrs:{href:t.to}},[t._t("default")],2)},i=[],a=(o("4de4"),{name:"ext-router-link",props:{to:String,app:String},computed:{isRoute:function(){var t=this;return!(this.$props.app!==this.$root.appName||!this.$router)&&this.$router.options.routes.filter((function(e){return e.path===t.$props.to})).length}}}),r=a,s=o("2877"),c=Object(s["a"])(r,n,i,!1,null,null,null);e["a"]=c.exports},ec4e:function(t,e,o){"use strict";var n=o("d102"),i=o.n(n);i.a}});
//# sourceMappingURL=todo.b9f0e398.js.map